@model LavaderoMotos.Controllers.ResumenCierreCaja

@{
    ViewData["Title"] = "Cierre de Caja";
}

<div class="container">
    <h2>@ViewData["Title"]</h2>
    <hr />

    <div class="row">
        <div class="col-md-6">
            <h4>Resumen de Movimientos</h4>
            
            <div class="card mb-3">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Efectivo</h5>
                </div>
                <div class="card-body">
                    <table class="table table-sm">
                        <tr>
                            <th>Saldo Inicial:</th>
                            <td class="text-end">@Model.Caja.SaldoInicialEfectivo.ToString("N0")</td>
                        </tr>
                        <tr>
                            <th>Ingresos por Ventas:</th>
                            <td class="text-end">@Model.TotalEfectivoVentas.ToString("N0")</td>
                        </tr>
                        <tr>
                            <th>Adelantos Órdenes:</th>
                            <td class="text-end">@Model.TotalEfectivoAdelantos.ToString("N0")</td>
                        </tr>
                        <tr>
                            <th>Total Egresos:</th>
                            <td class="text-end">@Model.TotalEgresosEfectivo.ToString("N0")</td>
                        </tr>
                        <tr class="table-active">
                            <th>Saldo Teórico:</th>
                            <td class="text-end fw-bold">@Model.SaldoTeoricoEfectivo.ToString("N0")</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">Transferencias</h5>
                </div>
                <div class="card-body">
                    <table class="table table-sm">
                        <tr>
                            <th>Ingresos por Ventas:</th>
                            <td class="text-end">@Model.TotalTransferenciaVentas.ToString("N0")</td>
                        </tr>
                        <tr>
                            <th>Adelantos Órdenes:</th>
                            <td class="text-end">@Model.TotalTransferenciaAdelantos.ToString("N0")</td>
                        </tr>
                        <tr>
                            <th>Total Egresos:</th>
                            <td class="text-end">@Model.TotalEgresosTransferencia.ToString("N0")</td>
                        </tr>
                        <tr class="table-active">
                            <th>Saldo Teórico:</th>
                            <td class="text-end fw-bold">@Model.SaldoTeoricoTransferencia.ToString("N0")</td>
                        </tr>
                    </table>
                </div>
            </div>

            <form asp-action="ConfirmarCierre">
                <input type="hidden" name="id" value="@Model.Caja.Id" />
                
                <div class="form-group mb-3">
                    <label class="control-label">Efectivo en Caja:</label>
                    <input name="saldoFinalEfectivo" class="form-control" 
                           value="@Model.SaldoTeoricoEfectivo.ToString("0.00")" 
                           step="0.01" required />
                </div>
                
                <div class="form-group mb-3">
                    <label class="control-label">Transferencias:</label>
                    <input name="saldoFinalTransferencia" class="form-control" 
                           value="@Model.SaldoTeoricoTransferencia.ToString("0.00")" 
                           step="0.01" required />
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-lock"></i> Confirmar Cierre
                    </button>
                    <a asp-action="Index" class="btn btn-danger">
                        <i class="bi bi-arrow-left"></i> Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>